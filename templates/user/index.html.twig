{% extends "base.html.twig" %}

{% block title %}
User Page
!{% endblock %}


{% block stylesheets %}
{{ parent() }}

<link rel="stylesheet" type="text/css" media="screen" href="{{ asset('dist/css/user.css') }}">
!{% endblock %}

{% block body %}
<div class="container">
    <div class="main">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-10 mx-auto">
                <div class="card card-user my-5">
                    <div class="card-body">
                        <div class="row">
                            <div class="col col-3 float-right">
                            </div>
                            <div class="col col-3 float-right">
                                <button id="btn-sidebar-open" class="btn btn-success" onclick="toggleSidebar()">Show Tweets</button>
                            </div>
                            <div class="col col-6 float-left">
                                <button class="btn btn-info" href={{ path('post_new') }}>New Post</button>

                            </div>
                        </div>

                        <h5 class="card-title text-center">Posts from {{ user.name }}</h5>


                        <div class="row">
                            <div class="col-sm-10 col-md-10 col-8-10 mx-auto">
                                {% for p in posts %}
                                <div id="post-{{ loop.index }}" class="card card-paginated my-5">
                                    <div class="card-header bg-secondary text-white">
                                        <h6>{{ p.title }}</h6>
                                        <p class="float-right">{{ p.createdat|date('d/m/Y g:i:s a') }}</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <a class="btn text-dark float-right editable-post" href={{ path('post_edit', {'id': p.id}) }}>Edit</a>
                                        </div>
                                        <p>{{ p.content }}</p>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    {% set npages = (posts|length / 3)|round(0, 'ceil') %}
                    {% include 'include/pagination.html.twig' with { 'npages': npages } %}
                </div>
            </div>
        </div>
    </div>
    <div class="sidebar">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-10 mx-auto">
                <div class="card card-user my-5">
                    <div class="card-body">
                        <button id="btn-sidebar-close" class="btn btn-success" onclick="toggleSidebar()">Hide Tweets</button>
                        <h5 class="card-title text-center">Tweets</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



!{% endblock %}

{% block javascripts %}
{{ parent() }}

<script type="text/javascript">
    const USER_ID = Number("{{ user.id }}");
    const NCARDS = Number("{{ posts|length }}");
</script>

<script src="{{ asset('dist/js/user.js') }}"></script>
!{% endblock %}

